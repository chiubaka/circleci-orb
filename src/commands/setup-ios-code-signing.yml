description: >
  Sets up code signing for a single iOS app. Must be used once per app in a monorepo.

parameters:
  app-dir:
    description: The directory containing the React Native app project
    type: string
  secrets-dir:
    description: Location of the Secrets directory relative to the `app-dir` parameter
    type: string
    default: ios/secrets

steps:
  - run:
      name: Decode App Store Connect key
      command: << include(scripts/decodeAppStoreConnectKey.sh) >>
      environment:
        SECRETS_DIR: << parameters.app-dir >>/<< parameters.secrets-dir >>
